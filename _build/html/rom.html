<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>rom Package &mdash; rom 0.20 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.20',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="rom 0.20 documentation" href="index.html" />
    <link rel="prev" title="Welcome to the documentation for the Redis object Mapper" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to the documentation for the Redis object Mapper"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">rom 0.20 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="rom-package">
<h1>rom Package<a class="headerlink" href="#rom-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id1">
<h2><tt class="xref py py-mod docutils literal"><span class="pre">rom</span></tt> Package<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-rom.exceptions">
<span id="exceptions-module"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">exceptions</span></tt> Module<a class="headerlink" href="#module-rom.exceptions" title="Permalink to this headline">¶</a></h2>
<dl class="exception">
<dt id="rom.exceptions.ORMError">
<em class="property">exception </em><tt class="descclassname">rom.exceptions.</tt><tt class="descname">ORMError</tt><a class="headerlink" href="#rom.exceptions.ORMError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">exceptions.Exception</span></tt></p>
<p>Base class for all ORM-related errors</p>
</dd></dl>

<dl class="exception">
<dt id="rom.exceptions.UniqueKeyViolation">
<em class="property">exception </em><tt class="descclassname">rom.exceptions.</tt><tt class="descname">UniqueKeyViolation</tt><a class="headerlink" href="#rom.exceptions.UniqueKeyViolation" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#rom.exceptions.ORMError" title="rom.exceptions.ORMError"><tt class="xref py py-class docutils literal"><span class="pre">rom.exceptions.ORMError</span></tt></a></p>
<p>Raised when trying to save an entity without a distinct column value</p>
</dd></dl>

<dl class="exception">
<dt id="rom.exceptions.InvalidOperation">
<em class="property">exception </em><tt class="descclassname">rom.exceptions.</tt><tt class="descname">InvalidOperation</tt><a class="headerlink" href="#rom.exceptions.InvalidOperation" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#rom.exceptions.ORMError" title="rom.exceptions.ORMError"><tt class="xref py py-class docutils literal"><span class="pre">rom.exceptions.ORMError</span></tt></a></p>
<p>Raised when trying to delete or modify a column that cannot be deleted or modified</p>
</dd></dl>

<dl class="exception">
<dt id="rom.exceptions.QueryError">
<em class="property">exception </em><tt class="descclassname">rom.exceptions.</tt><tt class="descname">QueryError</tt><a class="headerlink" href="#rom.exceptions.QueryError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#rom.exceptions.InvalidOperation" title="rom.exceptions.InvalidOperation"><tt class="xref py py-class docutils literal"><span class="pre">rom.exceptions.InvalidOperation</span></tt></a></p>
<p>Raised when arguments to <tt class="docutils literal"><span class="pre">Model.get_by()</span></tt> or <tt class="docutils literal"><span class="pre">Query.filter</span></tt> are not valid</p>
</dd></dl>

<dl class="exception">
<dt id="rom.exceptions.ColumnError">
<em class="property">exception </em><tt class="descclassname">rom.exceptions.</tt><tt class="descname">ColumnError</tt><a class="headerlink" href="#rom.exceptions.ColumnError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#rom.exceptions.ORMError" title="rom.exceptions.ORMError"><tt class="xref py py-class docutils literal"><span class="pre">rom.exceptions.ORMError</span></tt></a></p>
<p>Raised when your column definitions are not kosher</p>
</dd></dl>

<dl class="exception">
<dt id="rom.exceptions.MissingColumn">
<em class="property">exception </em><tt class="descclassname">rom.exceptions.</tt><tt class="descname">MissingColumn</tt><a class="headerlink" href="#rom.exceptions.MissingColumn" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#rom.exceptions.ColumnError" title="rom.exceptions.ColumnError"><tt class="xref py py-class docutils literal"><span class="pre">rom.exceptions.ColumnError</span></tt></a></p>
<p>Raised when a model has a required column, but it is not provided on construction</p>
</dd></dl>

<dl class="exception">
<dt id="rom.exceptions.InvalidColumnValue">
<em class="property">exception </em><tt class="descclassname">rom.exceptions.</tt><tt class="descname">InvalidColumnValue</tt><a class="headerlink" href="#rom.exceptions.InvalidColumnValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#rom.exceptions.ColumnError" title="rom.exceptions.ColumnError"><tt class="xref py py-class docutils literal"><span class="pre">rom.exceptions.ColumnError</span></tt></a></p>
<p>Raised when you attempt to pass a primary key on entity creation or when data assigned to a column is the wrong type</p>
</dd></dl>

</div>
<div class="section" id="module-rom.index">
<span id="index-module"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">index</span></tt> Module<a class="headerlink" href="#module-rom.index" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="rom.index.GeneralIndex">
<em class="property">class </em><tt class="descclassname">rom.index.</tt><tt class="descname">GeneralIndex</tt><big>(</big><em>namespace</em><big>)</big><a class="headerlink" href="#rom.index.GeneralIndex" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>This class implements general indexing and search for the <tt class="docutils literal"><span class="pre">rom</span></tt> package.</p>
<p>Generally speaking, numeric indices use ZSETs, and text indices use SETs
built using an &#8216;inverted index&#8217;.</p>
<p>Say that we have words <tt class="docutils literal"><span class="pre">hello</span> <span class="pre">world</span></tt> in a column <tt class="docutils literal"><span class="pre">c</span></tt> on a model with
primary key <tt class="docutils literal"><span class="pre">MyModel:1</span></tt>. The member <tt class="docutils literal"><span class="pre">1</span></tt> will be added to SETs with
keys:</p>
<div class="highlight-python"><pre>MyModel:c:hello
MyModel:c:world</pre>
</div>
<p>Text searching performs a sequence of intersections of SETs for the words
to be searched for.</p>
<p>Numeric range searching performs a sequence of intersections of ZSETs,
removing items outside the requested range after each intersection.</p>
<p>Searches will pre-sort intersections from smallest to largest SET/ZSET
prior to performing the search to improve performance.</p>
<dl class="method">
<dt id="rom.index.GeneralIndex.count">
<tt class="descname">count</tt><big>(</big><em>conn</em>, <em>filters</em><big>)</big><a class="headerlink" href="#rom.index.GeneralIndex.count" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the count of the items that match the provided filters.</p>
<p>For the meaning of what the <tt class="docutils literal"><span class="pre">filters</span></tt> argument means, see the
<tt class="docutils literal"><span class="pre">.search()</span></tt> method docs.</p>
</dd></dl>

<dl class="method">
<dt id="rom.index.GeneralIndex.index">
<tt class="descname">index</tt><big>(</big><em>conn</em>, <em>id</em>, <em>keys</em>, <em>scores</em>, <em>pipe=None</em><big>)</big><a class="headerlink" href="#rom.index.GeneralIndex.index" title="Permalink to this definition">¶</a></dt>
<dd><p>Will index the provided data atomically.</p>
<p>Arguments:</p>
<blockquote>
<div><ul class="simple">
<li><em>id</em> - the id of the entity that is being indexed</li>
<li><em>keys</em> - an iterable sequence of keys of the form:
<tt class="docutils literal"><span class="pre">column_name:key</span></tt> to index</li>
<li><em>scores</em> - a dictionary mapping <tt class="docutils literal"><span class="pre">column_name</span></tt> to numeric
scores and/or mapping <tt class="docutils literal"><span class="pre">column_name:key</span></tt> to numeric scores</li>
</ul>
</div></blockquote>
<p>This will automatically unindex the provided id before
indexing/re-indexing.</p>
<p>Unindexing is possible because we keep a record of all keys and score
keys that were provided.</p>
</dd></dl>

<dl class="method">
<dt id="rom.index.GeneralIndex.search">
<tt class="descname">search</tt><big>(</big><em>conn</em>, <em>filters</em>, <em>order_by</em>, <em>offset=None</em>, <em>count=None</em><big>)</big><a class="headerlink" href="#rom.index.GeneralIndex.search" title="Permalink to this definition">¶</a></dt>
<dd><p>Search for model ids that match the provided filters.</p>
<p>Arguments:</p>
<blockquote>
<div><ul>
<li><p class="first"><em>filters</em> - A list of filters that apply to the search of one of
the following two forms:</p>
<blockquote>
<div><ol class="arabic simple">
<li><tt class="docutils literal"><span class="pre">'column:string'</span></tt> - a plain string will match a word in a
text search on the column</li>
</ol>
<ol class="arabic simple" start="2">
<li><tt class="docutils literal"><span class="pre">('column',</span> <span class="pre">min,</span> <span class="pre">max)</span></tt> - a numeric column range search,
between min and max (inclusive by default)</li>
</ol>
<ol class="arabic simple" start="3">
<li><tt class="docutils literal"><span class="pre">['column:string1',</span> <span class="pre">'column:string2']</span></tt> - will match any
of the words in a text search on the column</li>
</ol>
</div></blockquote>
</li>
<li><p class="first"><em>order_by</em> - A string that names the numeric column by which to
sort the results by. Prefixing with &#8216;-&#8216; will return results in
descending order</p>
</li>
</ul>
<ul class="simple">
<li><em>offset</em> - A numeric starting offset for results</li>
<li><em>count</em> - The maximum number of results to return from the query</li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="rom.index.GeneralIndex.unindex">
<tt class="descname">unindex</tt><big>(</big><em>conn</em>, <em>id</em><big>)</big><a class="headerlink" href="#rom.index.GeneralIndex.unindex" title="Permalink to this definition">¶</a></dt>
<dd><p>Will unindex an entity atomically.</p>
<p>Arguments:</p>
<blockquote>
<div><ul class="simple">
<li><em>id</em> - the id of the entity to remove from the index</li>
</ul>
</div></blockquote>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-rom.util">
<span id="util-module"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">util</span></tt> Module<a class="headerlink" href="#module-rom.util" title="Permalink to this headline">¶</a></h2>
<div class="section" id="changing-connection-settings">
<h3>Changing connection settings<a class="headerlink" href="#changing-connection-settings" title="Permalink to this headline">¶</a></h3>
<p>There are 4 ways to change the way that <tt class="docutils literal"><span class="pre">rom</span></tt> connects to Redis.</p>
<ol class="arabic">
<li><p class="first">Set the global default connection settings by calling
<tt class="docutils literal"><span class="pre">rom.util.set_connection_settings()`</span></tt> with the same arguments you would
pass to the redis.Redis() constructor:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">rom.util</span>

<span class="n">rom</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">set_connection_settings</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s">&#39;myhost&#39;</span><span class="p">,</span> <span class="n">db</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Give each model its own Redis connection on creation, called _connection,
which will be used whenever any Redis-related calls are made on instances
of that model:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">rom</span>

<span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">rom</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">_conn</span> <span class="o">=</span> <span class="n">redis</span><span class="o">.</span><span class="n">Redis</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s">&#39;myhost&#39;</span><span class="p">,</span> <span class="n">db</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>

    <span class="n">attribute</span> <span class="o">=</span> <span class="n">rom</span><span class="o">.</span><span class="n">String</span><span class="p">()</span>
    <span class="n">other_attribute</span> <span class="o">=</span> <span class="n">rom</span><span class="o">.</span><span class="n">String</span><span class="p">()</span>
</pre></div>
</div>
</li>
<li><p class="first">Replace the <tt class="docutils literal"><span class="pre">CONNECTION</span></tt> object in <tt class="docutils literal"><span class="pre">rom.util</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">rom.util</span>

<span class="n">rom</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">CONNECTION</span> <span class="o">=</span> <span class="n">redis</span><span class="o">.</span><span class="n">Redis</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s">&#39;myhost&#39;</span><span class="p">,</span> <span class="n">db</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Monkey-patch <tt class="docutils literal"><span class="pre">rom.util.get_connection</span></tt> with a function that takes no
arguments and returns a Redis connection:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">rom.util</span>

<span class="k">def</span> <span class="nf">my_connection</span><span class="p">():</span>
    <span class="c"># Note that this function doesn&#39;t use connection pooling,</span>
    <span class="c"># you would want to instantiate and cache a real connection</span>
    <span class="c"># as necessary.</span>
    <span class="k">return</span> <span class="n">redis</span><span class="o">.</span><span class="n">Redis</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s">&#39;myhost&#39;</span><span class="p">,</span> <span class="n">db</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>

<span class="n">rom</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">get_connection</span> <span class="o">=</span> <span class="n">my_connection</span>
</pre></div>
</div>
</li>
</ol>
<dl class="function">
<dt id="rom.util.get_connection">
<tt class="descclassname">rom.util.</tt><tt class="descname">get_connection</tt><big>(</big><big>)</big><a class="headerlink" href="#rom.util.get_connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Override me for one of the ways to change the way I connect to Redis.</p>
</dd></dl>

<dl class="class">
<dt id="rom.util.Session">
<em class="property">class </em><tt class="descclassname">rom.util.</tt><tt class="descname">Session</tt><a class="headerlink" href="#rom.util.Session" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">thread._local</span></tt></p>
<p>This is a very dumb session. All it tries to do is to keep a cache of
loaded entities, offering the ability to call <tt class="docutils literal"><span class="pre">.save()</span></tt> on modified (or
all) entities with <tt class="docutils literal"><span class="pre">.flush()</span></tt> or <tt class="docutils literal"><span class="pre">.commit()</span></tt>.</p>
<p>This is exposed via the <tt class="docutils literal"><span class="pre">session</span></tt> global variable, which is available
when you <tt class="docutils literal"><span class="pre">import</span> <span class="pre">rom</span></tt> as <tt class="docutils literal"><span class="pre">rom.session</span></tt>.</p>
<dl class="method">
<dt id="rom.util.Session.add">
<tt class="descname">add</tt><big>(</big><em>obj</em><big>)</big><a class="headerlink" href="#rom.util.Session.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds an entity to the session.</p>
</dd></dl>

<dl class="method">
<dt id="rom.util.Session.commit">
<tt class="descname">commit</tt><big>(</big><em>full=False</em>, <em>all=False</em><big>)</big><a class="headerlink" href="#rom.util.Session.commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Call <tt class="docutils literal"><span class="pre">.save()</span></tt> on all modified entities in the session. Also forgets
all known entities in the session, so this should only be called at
the end of a request.</p>
<p>Arguments:</p>
<blockquote>
<div><ul class="simple">
<li><em>full</em> - pass <tt class="docutils literal"><span class="pre">True</span></tt> to force save full entities, not only
changes</li>
<li><em>all</em> - pass <tt class="docutils literal"><span class="pre">True</span></tt> to save all entities known, not only those
entities that have been modified.</li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="rom.util.Session.flush">
<tt class="descname">flush</tt><big>(</big><em>full=False</em>, <em>all=False</em><big>)</big><a class="headerlink" href="#rom.util.Session.flush" title="Permalink to this definition">¶</a></dt>
<dd><p>Call <tt class="docutils literal"><span class="pre">.save()</span></tt> on all modified entities in the session. Use when you
want to flush changes to Redis, but don&#8217;t want to lose your local
session cache.</p>
<p>See the <tt class="docutils literal"><span class="pre">.commit()</span></tt> method for arguments and their meanings.</p>
</dd></dl>

<dl class="method">
<dt id="rom.util.Session.forget">
<tt class="descname">forget</tt><big>(</big><em>obj</em><big>)</big><a class="headerlink" href="#rom.util.Session.forget" title="Permalink to this definition">¶</a></dt>
<dd><p>Forgets about an entity (automatically called when an entity is
deleted). Call this to ensure that an entity that you&#8217;ve modified is
not automatically saved on <tt class="docutils literal"><span class="pre">session.commit()</span></tt> .</p>
</dd></dl>

<dl class="method">
<dt id="rom.util.Session.get">
<tt class="descname">get</tt><big>(</big><em>pk</em><big>)</big><a class="headerlink" href="#rom.util.Session.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetches an entity from the session based on primary key.</p>
</dd></dl>

<dl class="method">
<dt id="rom.util.Session.refresh">
<tt class="descname">refresh</tt><big>(</big><em>*objects</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#rom.util.Session.refresh" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is an alternate API for refreshing many entities (possibly
not tracked by the session). You can call:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
<span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span><span class="n">obj1</span><span class="p">,</span> <span class="n">obj2</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
<span class="n">session</span><span class="o">.</span><span class="n">refresh</span><span class="p">([</span><span class="n">obj1</span><span class="p">,</span> <span class="n">obj2</span><span class="p">,</span> <span class="o">...</span><span class="p">])</span>
</pre></div>
</div>
<p>And all provided entities will be reloaded from Redis.</p>
<p>To force reloading for modified entities, you can pass <tt class="docutils literal"><span class="pre">force=True</span></tt>.</p>
</dd></dl>

<dl class="method">
<dt id="rom.util.Session.refresh_all">
<tt class="descname">refresh_all</tt><big>(</big><em>*objects</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#rom.util.Session.refresh_all" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is an alternate API for refreshing all entities tracked
by the session. You can call:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">session</span><span class="o">.</span><span class="n">refresh_all</span><span class="p">()</span>
<span class="n">session</span><span class="o">.</span><span class="n">refresh_all</span><span class="p">(</span><span class="n">force</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>And all entities known by the session will be reloaded from Redis.</p>
<p>To force reloading for modified entities, you can pass <tt class="docutils literal"><span class="pre">force=True</span></tt>.</p>
</dd></dl>

<dl class="method">
<dt id="rom.util.Session.rollback">
<tt class="descname">rollback</tt><big>(</big><big>)</big><a class="headerlink" href="#rom.util.Session.rollback" title="Permalink to this definition">¶</a></dt>
<dd><p>Forget about all entities in the session (<tt class="docutils literal"><span class="pre">.commit()</span></tt> will do
nothing).</p>
</dd></dl>

<dl class="method">
<dt id="rom.util.Session.save">
<tt class="descname">save</tt><big>(</big><em>*objects</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#rom.util.Session.save" title="Permalink to this definition">¶</a></dt>
<dd><p>This method an alternate API for saving many entities (possibly not
tracked by the session). You can call:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">session</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
<span class="n">session</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">obj1</span><span class="p">,</span> <span class="n">obj2</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
<span class="n">session</span><span class="o">.</span><span class="n">save</span><span class="p">([</span><span class="n">obj1</span><span class="p">,</span> <span class="n">obj2</span><span class="p">,</span> <span class="o">...</span><span class="p">])</span>
</pre></div>
</div>
<p>And the entities will be flushed to Redis.</p>
<p>You can pass the keyword arguments <tt class="docutils literal"><span class="pre">full</span></tt> and <tt class="docutils literal"><span class="pre">all</span></tt> with the same
meaning and semantics as the <tt class="docutils literal"><span class="pre">.commit()</span></tt> method.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="rom.util.refresh_indices">
<tt class="descclassname">rom.util.</tt><tt class="descname">refresh_indices</tt><big>(</big><em>model</em>, <em>block_size=100</em><big>)</big><a class="headerlink" href="#rom.util.refresh_indices" title="Permalink to this definition">¶</a></dt>
<dd><p>This utility function will iterate over all entities of a provided model,
refreshing their indices. This is primarily useful after adding an index
on a column.</p>
<p>Arguments:</p>
<blockquote>
<div><ul class="simple">
<li><em>model</em> - the model whose entities you want to reindex</li>
<li><em>block_size</em> - the maximum number of entities you want to fetch from
Redis at a time, defaulting to 100</li>
</ul>
</div></blockquote>
<p>This function will yield its progression through re-indexing all of your
entities.</p>
<p>Example use:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">for</span> <span class="n">progress</span><span class="p">,</span> <span class="n">total</span> <span class="ow">in</span> <span class="n">refresh_indices</span><span class="p">(</span><span class="n">MyModel</span><span class="p">,</span> <span class="n">block_size</span><span class="o">=</span><span class="mi">200</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s"> of </span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">progress</span><span class="p">,</span> <span class="n">total</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="rom.util.set_connection_settings">
<tt class="descclassname">rom.util.</tt><tt class="descname">set_connection_settings</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#rom.util.set_connection_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the global connection settings for models that don&#8217;t have
model-specific connections.</p>
</dd></dl>

</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">rom Package</a><ul>
<li><a class="reference internal" href="#id1"><tt class="docutils literal"><span class="pre">rom</span></tt> Package</a></li>
<li><a class="reference internal" href="#module-rom.exceptions"><tt class="docutils literal"><span class="pre">exceptions</span></tt> Module</a></li>
<li><a class="reference internal" href="#module-rom.index"><tt class="docutils literal"><span class="pre">index</span></tt> Module</a></li>
<li><a class="reference internal" href="#module-rom.util"><tt class="docutils literal"><span class="pre">util</span></tt> Module</a><ul>
<li><a class="reference internal" href="#changing-connection-settings">Changing connection settings</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Welcome to the documentation for the Redis object Mapper</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/rom.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to the documentation for the Redis object Mapper"
             >previous</a> |</li>
        <li><a href="index.html">rom 0.20 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Josiah Carlson.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b1.
    </div>
  </body>
</html>